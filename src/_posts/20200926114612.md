---
title: ブラウザ上で選択したテキストをテキストファイルとして保存する
date: 2020-09-26
description: JavaScriptを使ったテキストファイル保存について
category: 技術系
tags:
 - プログラミング
 - JavaScript
---

# {{ $frontmatter.title }}

ブラウザ上で選択したテキストをテキストファイルとして保存したくなったので、調べた結果をメモしておく。
  
ファイルを保存する処理は [こちら](https://piro.sakura.ne.jp/latest/blosxom.cgi/webtech/javascript/2005-10-05_download.htm) の記事を参考にしている。  
ファイル名や拡張子も指定したかったのでその部分に関しては aタグを作成する方法に変更した。  
  
#### サンプルコード
```javascript
var readText = document.getSelection(); // 選択中のテキストを取得。ここを変えれば他にも応用できるはず。
var contents = 'data:application/octet-stream,' + encodeURIComponent(readText);

var a = document.createElement('a');
a.download = 'selected.txt'; // ファイル名は適当
a.href = contents;
a.click();
```

#### ブックマークレット化
```javascript
javascript:(function(){var readText=document.getSelection();var contents='data:application/octet-stream,'+encodeURIComponent(readText);var a=document.createElement('a');a.download='selected.txt';a.href=contents;a.click()})();
```


### 背景

これをブックマークレットにしてWebサイトから読み取った情報をテキストファイルに保存する**予定だったが結局使わず**。  
せっかくなので一応残しておくけど、多分これを使う機会は無いと思う。 
